ORG 0H
LJMP MAIN
ORG 100H
MAIN:
JMP TAKE_INP

ORG 130H
	
DELAY_1MS:
PUSH 00H
MOV R0, #4
H2: ACALL DELAY_250US
DJNZ R0, H2
POP 00H
RET

DELAY_250US:
PUSH 00H
MOV R0, #244
H1: DJNZ R0, H1
POP 00H
RET

DELAY_5S:
MOV R5, #20

L_1:
MOV R4, #255
DJNZ R5, L_2
RET

L_2:
DJNZ R4, L_F
JMP L_1

L_F:
CALL DELAY_1MS
JMP L_2


DELAY_20US:
MOV R0, #13H
H3: DJNZ R0, H3
RET

TAKE_INP:
SETB P1.3
SETB P1.2
SETB P1.1
SETB P1.0
CALL DELAY_5S
SETB P0.7
MOV A, P1
ANL A, #0FH
MOV R2, A
SUBB A, #01H
JZ LOOP1
MOV A, R2
SUBB A, #03H
JZ LOOP2
MOV A, R2
SUBB A, #07H
JZ LOOP3
MOV A, R2
SUBB A, #0FH
JZ LOOP4

LOOP1:
CPL P0.7
LCALL DELAY1
JMP LOOP1

LOOP2:
CPL P0.7
LCALL DELAY2
JMP LOOP2

LOOP3:
CPL P0.7
LCALL DELAY3
JMP LOOP3

LOOP4:
CPL P0.7
LCALL DELAY4
JMP LOOP4

DELAY1:
MOV R1, #84

L1:
DJNZ R1, LOOP5
RET

LOOP5:
LCALL DELAY_20US
JMP L1

DELAY2:
MOV R1, #73

L2:
DJNZ R1, LOOP6
RET

LOOP6:
LCALL DELAY_20US
JMP L2

DELAY3:
MOV R1, #66

L3:
DJNZ R1, LOOP7
RET

LOOP7:
LCALL DELAY_20US
JMP L3

DELAY4:
MOV R1, #62

L4:
DJNZ R1, LOOP8
RET

LOOP8:
LCALL DELAY_20US
JMP L4

END